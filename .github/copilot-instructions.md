# Copilot Instructions

## Communication
- 日本語で応答すること
- 実装を行う前に、作業内容についてユーザに確認を取り、了承を得ること
- 必要に応じて、ユーザに質問を行い、要求を明確にすること
- 作業後、作業内容とユーザが次に取れる行動を説明すること

## Workflow
- 作業項目が多い場合は、段階に区切り、git commit を行いながら進めること
  - semantic commit を使用する

## Development Environment & Tools
### パッケージ管理
- コマンドの実行には必ずuvを使用すること
  - 基本的に、uv runコマンドで実行すること。uv run pythonコマンドは使用しないこと
- ライブラリを追加する際は、uvコマンドを使用してインストールすること
- 開発時しか使わないライブラリはdev dependenciesとしてインストールすること

### コードフォーマット
- コードの出力が終わった際、フォーマッタのruffを使用してコードを整形すること
- 同時に対象ファイルに`check --fix --select I`を実行し、import文の整理を行うこと

### その他
- コマンドの出力が確認できない場合、get last command / check background terminal を使用して確認すること

## Project Structure
- コードはsrcディレクトリに保存すること
- テストコードはtestsディレクトリに保存すること
- ドキュメントはdocsディレクトリに保存すること
- 処理データはdataディレクトリに、実験条件ごとにサブディレクトリを作成して保存すること
- 処理結果はresultsディレクトリに、実験条件ごとにサブディレクトリを作成して保存すること
- テスト用の使い捨てスクリプトは適当なtmpディレクトリに保存し、.gitignoreに追加すること

## Code Style
### 基本方針
- コードに絵文字を使用しないこと
- importは必ずファイル冒頭にまとめること
- 可能な限り型ヒントを追加すること
- スクリプトに実行時引数を使用する形には極力しないこと

### Python固有
- pythonは3.10以上を使用しているので、型ヒントに3.10以降の構文を使用すること
  - 特にTypingモジュールからListやDictをインポートせず、組み込みのlistやdictを使用すること

### ファイル操作
- ファイルを指定するときは、必ず相対パスを使用すること
- ファイル操作を行う場合は、pathlibを使用すること

## Libraries & Dependencies
- データ解析にはpandasではなくpolarsを使用すること
- 可視化にはmatplotlibを使用すること

## Data Processing
- 多数のデータを連続して処理するときは、データごとにdirectoryを分けて管理すること
- ループ処理を行う場合は、進捗を表示すること

## Visualization
### 基本設定
- 可視化にはmatplotlibを使用すること
- グラフのタイトル、軸ラベル、凡例を必ず追加すること

### スタイル
- タイトルなどの要素には日本語を使用しないこと
- フォントはTex Gyre Termes,Times New Romanを使用すること
  - Tex Gyre Termesはasset/fontsディレクトリに保存されている
- フォントサイズの指定にはrcParamsを使用し、特段の指示がない場合はそれぞれの場所で指定しないこと

### レイアウト
- tight_layout()を使用してレイアウトを自動調整すること
- 多数のデータを連続して描画するときは、fig.close()を使用してメモリを解放すること

## Documentation
- ドキュメントは必ずMarkdown形式で作成すること
- ドキュメントには必ず目次を追加すること
- ドキュメントはdocsディレクトリに保存すること